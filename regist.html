<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>注册一个vix账户</title>
		<link href="vix.png" rel="shortcut icon" />
		<link rel="stylesheet" href="css/dcalendar.picker.css" />
		<link rel="stylesheet" href="css/vixSiteMain.css" />
		<link rel="stylesheet" type="text/css" href="css/zzsc.css">
		<link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">

		<script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<script src="js/jquery-1.11.0.min.js" type="text/javascript"></script>
		<script src="js/dcalendar.picker.js" type="text/javascript"></script>
		<script type="text/javascript" src="js/registcheck.js"></script>
		<script>
			$(document).ready(function() {
				//注册验证
				$("#registBtn").click(function() {
					
					var myDate = new Date();
					var today = myDate.toLocaleDateString();
					var passwordR = $("#password").val();
					var usernameR = $("#username").val();
					var nicknameR = $("#nickname").val();
					var emailR = $("#email").val();
					var sexR = $('input:radio[name="sex"]:checked').val();
					var dateofbirthR = $("#mydatepicker").val();
					//邮箱的正则表达式
					var regEmail = '/^([a-zA-Z0-9]+[_|\-|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\-|\.]?)*[a-zA-Z0-9]+(\.[a-zA-Z]{2,3})+$/';
					
					
					//alert(today);
					
					function CompareDate(d1, d2) {
						return((new Date(d1.replace(/-/g, "\/"))) < (new Date(d2.replace(/-/g, "\/"))));
					}
					alert(CompareDate(dateofbirthR, today));
					//用户名检验
					if(usernameR == '') {
						$("#username").focus().css("border", "2px solid #C4473D").attr("placeholder", "这个不能为空~");
						return false;
					} else if(usernameR.length < 6 || usernameR.length > 20) {
						$("#username").focus().css("border", "2px solid #C4473D").parent().next().css({
							"color": "#CB1B45",
						}).text("(用户名要在6-20位之间哦)");
						return false;
					} else {
						$("#username").css("border", "1px solid #CCCCCC").parent().next().css({
							"color": "#000000",
						}).text("(可以咯~)");
					}

					//密码检验
					if(passwordR == '') {
						$("#password").focus().css("border", "2px solid #C4473D").attr("placeholder", "这个不能为空~");
						return false;
					} else if(passwordR.length < 6 || passwordR.length > 20) {
						$("#password").focus().css("border", "2px solid #C4473D").parent().next().css({
							"color": "#CB1B45",
						}).text("(密码也是6-20位哦~)");
						return false;
					} else {
						$("#password").css("border", "1px solid #CCCCCC").parent().next().css({
							"color": "#000000",
						}).text("(可以咯~)");
					}

					//性别检验
					if(typeof(sexR) == "undefined") {
						$("#sexE").css({
							"color": "#CB1B45",
						}).text("(要选性别哟~)");
						return false;
					} else {
						$("#sexE").css({
							"color": "#ffffff",
						}).text("(OK咯~)");
					}

					//昵称检验
					if(nicknameR == '') {
						$("#nickname").focus().css("border", "2px solid #C4473D").attr("placeholder", "这个不能为空~");
						return false;
					} else if(nicknameR.length < 6 || nicknameR.length > 20) {
						$("#nickname").focus().css("border", "2px solid #C4473D").parent().next().css({
							"color": "#CB1B45",
						}).text("(是6-20位~~)");
						return false;
					} else {
						$("#nickname").css("border", "1px solid #CCCCCC").parent().next().css({
							"color": "#ffffff",
						}).text("(格式正确了)");
					}

					//邮箱检验
					if(emailR == '') {
						$("#email").focus().css("border", "2px solid #C4473D").attr("placeholder", "这个不能为空~");
						return false;
					} else if(!regEmail.test(emailR)) {
						$("#email").focus().css("border", "2px solid #C4473D").parent().next().css({
							"color": "#CB1B45",
						}).text("(格式错啦~)");
						return false;
					} else {
						$("#email").css("border", "1px solid #CCCCCC").parent().next().css({
							"color": "#ffffff",
						}).text("(邮箱正确咯~)");
					}

					//出生日期检验
					if(dateofbirthR == ''){
						$("#mydatepicker").css("border", "2px solid #C4473D").parent().next().css({
							"color": "#CB1B45",
						}).text("(大！)");
						return false;
					}else if(CompareDate(dateofbirthR, today)) {
						$("#mydatepicker").css("border", "2px solid #C4473D").parent().next().css({
							"color": "#CB1B45",
						}).text("(大！)");
						return false;
					} else {
						$("#mydatepicker").css("border", "2px solid #C4473D").parent().next().css({
							"color": "#CB1B45",
						}).text("(小！)");
						return false;
					}
					alert("!!");
					//$("#regist-form").submit();

				})
			});
		</script>
	</head>

	<body>
		<!--
        	作者：sweetfish1314@gmail.com
        	时间：2018-01-10
        	描述：导航栏
       -->

		<nav class="navbar navbar-dark bg-mainpink" role="navigation">
			<div class="container-fluid">
				<div class="navbar-header">
					<a class="navbar-brand" href="###">VIX</a>
				</div>
				<div>
					<ul class="nav navbar-nav navbar-left">
						<li class="active">
							<a href="index.html" target="_blank">主站</a>
						</li>
					</ul>
					<p class="navbar-text navbar-left">vix插画交流网站</p>

					<ul class="nav navbar-nav navbar-right">
						<li class="nav-item active" id="userp">
						</li>
						<li class="nav-item active" id="unlogp">
						</li>
					</ul>
					<form class="navbar-form form-inline navbar-right" role="search" action="php/search-navbar.php" method="post">
						<div class="form-group">
							<input class="form-control" type="text" placeholder="Search" id="search-text" name="searchtext">
							<select class="form-control" id="search-type" name="searchtype">
								<option value="1" selected="selected">插画名</option>
								<option value="2">作者</option>
							</select>
						</div>
						<button class="btn btn-dark" type="submit">搜索</button>
					</form>
				</div>
			</div>
		</nav>

		<!--
        	作者：sweetfish1314@gmail.com
        	时间：2018-01-10
        	描述：注册表单
      -->
		<div class="container">
			<h3 class="text-center">填写你的注册信息~~</h3>
			<div class="row">
				<div class="col-md-2"></div>
				<div class="col-md-8">
					<form class="form-horizontal register-form" role="form" action="" method="post" id="regist-form" onsubmit="return timecheck();">
						<div class="form-group text-left">
							<label for="username" class="col-sm-3 control-label">用户名</label>
							<div class="col-md-6">
								<input type="text" class="form-control" id="username" placeholder="用户名是不可更改的哟" name="userName" />
							</div>
							<label for="username" class="control-label">(6-20个字符哦)</label>
						</div>
						<div class="form-group">
							<label for="password" class="col-sm-3 control-label">密码</label>
							<div class="col-sm-6">
								<input type="password" class="form-control" id="password" placeholder="这个是秘密哟~~~" name="password" />
							</div>
							<label for="password" class="control-label">(6-20个字符哦)</label>
						</div>

						<div class="form-group">
							<label for="sex" class="col-sm-3 control-label">性别</label>
							<div class="col-sm-6">
								<label class="radio-inline"><input type="radio" name="sex" value="M" id="sex-m">男</label>
								<label class="radio-inline"><input type="radio" name="sex" value="F" id="sex-f">女</label>
								<label class="radio-inline"><input type="radio" name="sex" value="S" id="sex-s">保密</label>
							</div>
							<label for="sex" class="control-label" id="sexE">(男还是女，亦或是你想保密？)</label>
						</div>
						<div class="form-group">
							<label for="nickname" class="col-sm-3 control-label">昵称</label>
							<div class="col-sm-6">
								<input type="text" class="form-control" id="nickname" placeholder="你可爱的昵称~" name="nickName" />
							</div>
							<label for="nickname" class="control-label">(6-20个字符哦)</label>
						</div>
						<div class="form-group">
							<label for="email" class="col-sm-3 control-label">电子邮箱</label>
							<div class="col-sm-6">
								<input type="text" class="form-control" id="email" placeholder="让我们可以联系到你~" name="email" />
							</div>
							<label for="email" class="control-label">(栗子：zzai@zzai.com)</label>
						</div>
						<div class="form-group">
							<label for="birthday" class="col-sm-3 control-label">出生日期</label>
							<div class="col-sm-6">
								<input id="mydatepicker" type="text" name="birthDay" class="form-control" />
							</div>
							<label for="birthday" class="control-label">(这一天世界上出现了你~)</label>
						</div>
						<div class="form-group">
							<div class="col-sm-offset-5 col-sm-7">
								<button id="registBtn" class="btn btn-default" onclick="javascript:timecheck();">填好了！</button>
							</div>
						</div>
					</form>

				</div>
				<div class="col-md-2"></div>
			</div>
		</div>
		<script>
			function timecheck() {
				var myDate = new Date();
				var today = myDate.toLocaleDateString();
				today = replace("//", "-");
				document.write("!!!");

				function CompareDate(d1, d2) {
					return((new Date(d1.replace(/-/g, "\/"))) > (new Date(d2.replace(/-/g, "\/"))));
				}
				if(CompareDate(dateofbirthR, today)) {
					//document.getElementById("#mydatepicker")
					document.write(today);
					return false;
				} else {
					$("#mydatepicker").css("border", "2px solid #C4473D").parent().next().css({
						"color": "#CB1B45",
					}).text("(小！)");
					return false;
				}
				return false;
			}
		</script>

		<!--
        	作者：sweetfish1314@gmail.com
        	时间：2018-01-14
        	描述：底端栏
        -->
		<div class="row footer">
			<div class="col-md-2"></div>
			<div class="col-md-5">
				<p class="text-dark"><br><br>联系我们：sweetfish1314@gmail.com</p><br>
			</div>
			<div class="col-md-5">
				<div>
					<ul class="friendly-link">
						<li>
							<p>友情链接</p>
						</li>
						<li>
							<a href="http://www.baidu.com" target="_blank">百度</a>
						</li>
						<li>
							<a href="http://www.bilibili.com" target="_blank">哔哩哔哩</a>
						</li>
						<li>
							<a href="http://www.pixiv.net" target="_blank">pixiv</a>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<!--
        	作者：sweetfish1314@gmail.com
        	时间：2018-01-11
        	描述：日历js脚本
       -->

		<script type="text/javascript">
			$('#mydatepicker').dcalendarpicker({
				format: 'yyyy-mm-dd'
			});
		</script>
	</body>

</html>